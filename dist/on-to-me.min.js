export function getPreviousSib(self){let prevSib=self;for(;prevSib&&prevSib.hasAttribute("on");)prevSib=prevSib.previousElementSibling,null===prevSib&&(prevSib=self.parentElement);return prevSib}export function nudge(prevSib){const da=prevSib.getAttribute("disabled");null!==da&&(0===da.length||"1"===da?prevSib.removeAttribute("disabled"):prevSib.setAttribute("disabled",(parseInt(da)-1).toString()))}export function getProp(val,pathTokens,src){let context=val,first=!0;return pathTokens.forEach((token=>{if(context&&""!==token){if(first&&"target"===token&&null===context.target)context=src._trigger;else switch(typeof token){case"string":context=context[token];break;default:context=context[token[0]].apply(context,token[1])}first=!1}})),context}const ltcRe=/(\-\w)/g;export function lispToCamel(s){return s.replace(ltcRe,(function(m){return m[1].toUpperCase()}))}export function findMatches(start,match,m){const returnObj=[],ubound=null==m?1/0:parseInt(m);let count=0;for(;null!==start&&!(start.matches(match)&&(count++,returnObj.push(start),count>ubound));)start=start.nextElementSibling;return returnObj}export function getToProp(css){const iPos=css.lastIndexOf("[");return-1===iPos?null:lispToCamel(css.substring(iPos,css.length-1))}customElements.define("on-to-me",class extends HTMLElement{connectedCallback(){this.style.display="none";const elToObserve=getPreviousSib(this);nudge(elToObserve),elToObserve.addEventListener(this.getAttribute("on"),(e=>{const val=getProp(e,this.getAttribute("val").split("."),this);if(void 0===val)return;const to=this.getAttribute("to"),matches=findMatches(this.nextElementSibling,to,this.getAttribute("m")),toProp=getToProp(to);matches.forEach((match=>{match[toProp]=val}))}))}});
