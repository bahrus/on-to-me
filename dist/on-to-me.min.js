export function getPreviousSib(t){let e=t;for(;e&&e.hasAttribute("on");)e=e.previousElementSibling,null===e&&(e=t.parentElement);return e}export function nudge(t){const e=t.getAttribute("disabled");null!==e&&(0===e.length||"1"===e?t.removeAttribute("disabled"):t.setAttribute("disabled",(parseInt(e)-1).toString()))}export function getProp(t,e,n){let r=t,o=!0;return e.forEach((t=>{if(r&&""!==t){if(o&&"target"===t&&null===r.target)r=n._trigger;else switch(typeof t){case"string":r=r[t];break;default:r=r[t[0]].apply(r,t[1])}o=!1}})),r}const ltcRe=/(\-\w)/g;export function lispToCamel(t){return t.replace(ltcRe,(function(t){return t[1].toUpperCase()}))}export function findMatches(t,e,n,r,o){const i=[],l=null==n?1/0:parseInt(n);let s=0;for(t=r?t.closest(r):t.nextElementSibling;null!==t;){if(t.matches(e)){if(o){const e=Array.from(t.querySelectorAll(o));i.concat(e),s+=e.length}else s++,i.push(t);if(s>l)break}t=t.nextElementSibling}return i}export function getToProp(t,e){const n=(e||t).lastIndexOf("[");return-1===n?null:lispToCamel(t.substring(n+2,t.length-1))}customElements.define("on-to-me",class extends HTMLElement{connectedCallback(){this.style.display="none";const t=getPreviousSib(this);nudge(t);const e=this.getAttribute.bind(this);t.addEventListener(e("on"),(t=>{t.stopPropagation();const n=getProp(t,e("val").split("."),this);if(void 0===n)return;const r=e("to"),o=e("care-of"),i=findMatches(this,r,e("m"),e("from"),o),l=getToProp(r,o);i.forEach((t=>{t[l]=n}))}))}});
